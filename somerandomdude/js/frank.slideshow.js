// Generated by CoffeeScript 1.3.1
var FSS;FSS=function(){function g(a,b){this.element=a;Object.prototype.toString.call(b)==="[object Object]"?this.options=b:this.options=new Object;this.init();this.gotoslide(0);this.autoplay&&this.play()}var a,b,c,d,e,f;g.element=null;g.options=null;g.target=null;g.container=null;g.slides=[];g.navigation=null;g.slideA=null;g.slideB=null;g.caption=null;g.currentIndex=-1;g.interval=null;g.autoplay=!0;g.prototype.pause=function(){clearTimeout(this.interval)};g.prototype.play=function(){clearTimeout(this.interval);this.interval=setTimeout(a,this.duration,this)};g.prototype.next=function(){var a;a=this.currentIndex<this.slides.length-1?this.currentIndex+1:0;this.gotoslide(a)};g.prototype.gotoslide=function(a){var b,c;if(this.currentIndex===a)return;b=this.element.parentNode.querySelector(".visible");if(b&&b===this.slideA){this.slideB.style.backgroundPosition="0px "+String(this.options.height*a*-1)+"px";this.slideA.className=this.slideA.className.replace(new RegExp("(\\s|^)visible(\\s|$)"),"");this.slideB.className+=" visible"}else{this.slideA.style.backgroundPosition="0px "+String(this.options.height*a*-1)+"px";this.slideB.className=this.slideB.className.replace(new RegExp("(\\s|^)visible(\\s|$)"),"");this.slideA.className+=" visible"}b=this.navigation.querySelector(".active");b&&b.removeAttribute("class");b=document.createAttribute("class");b.nodeValue="active";this.navigation.childNodes.item(a).setAttributeNode(b);c=this.currentIndex===-1?0:this.currentIndex;this.slides[c].el.className=this.slides[c].el.className.replace(new RegExp("(\\s|^)active(\\s|$)"),"");this.slides[a].el.className+=" active";this.currentIndex=a};g.prototype.init=function(){var a,c,g,h,i,j,k,l,m;c=this;this.options.width||(this.options.width=this.element.offsetWidth);this.options.height||(this.options.height=this.element.offsetHeight);this.autoplay=!0;this.duration=5e3;this.currentIndex=-1;this.element.className.match(new RegExp("(\\s|^)fss(\\s|$)"))||(this.element.className+=" fss");this.caption=this.element.querySelector(".captions");if(!this.caption)return;a=this.caption.firstChild;i=0;this.slides=new Array;while(a){a&&a.nodeType!==3&&this.slides.push({ndx:i++,el:a});a=a.nextSibling}this.container=b("div","slide-container");this.slideA=b("div","slide-a visible");this.slideB=b("div","slide-b");this.element.insertBefore(this.container,this.caption);this.container.appendChild(this.slideA);this.container.appendChild(this.slideB);this.slideA.style.width=this.slideB.style.width=this.options.width+"px";this.slideA.style.height=this.slideB.style.height=this.options.height+"px";this.navigation=b("ul","fss-nav");m=this.slides;for(g=k=0,l=m.length;k<l;g=++k){j=m[g];h=b("li");h.appendChild(document.createTextNode(String(g+1)));this.navigation.appendChild(h);h.onclick=function(a){return f(a,c)}}this.container.appendChild(this.navigation);this.container.onmouseover=function(a){return e(a,c)};this.container.onmouseout=function(a){return d(a,c)}};b=function(a,b){var c,d;d=document.createElement(a);if(!b)return d;c=document.createAttribute("class");c.nodeValue=b;d.setAttributeNode(c);return d};c=function(a,b){if(a===b)return!1;while(a&&a!==b)a=a.parentNode;return a===b};a=function(a){if(!a)return;a.next();a.play()};f=function(a,b){var c;b.pause();c=0;while(b.navigation.childNodes.item(c)){if(b.navigation.childNodes.item(c)===a.target){b.gotoslide(c);return}c++}};e=function(a,b){if(!a)return;if(!c(a.target,b.container)){a.cancelBubble=!0;a.stopPropagation();return!1}b.pause();b.navigation.className.match(new RegExp("(\\s|^)active(\\s|$)"))||(b.navigation.className+=" active")};d=function(a,b){if(c(a.relatedTarget,b.container)){a.cancelBubble=!0;a.stopPropagation();return!1}b.play();b.navigation.className.match(new RegExp("(\\s|^)active(\\s|$)"))&&(b.navigation.className=b.navigation.className.replace(new RegExp("(\\s|^)active(\\s|$)"),""))};return g}();