// LAST UPDATED ON NOVEMBER 13TH, 2012 (FH)
function setContainerEnabledState(e,t){e.css({opacity:t?1:.5});var n=e.find("input");t?n.removeAttr("disabled"):n.attr("disabled","disabled")}function registerEnableStateCallback(e,t){jQuery(t).click(function(){var t=jQuery(this).is(":checked");setContainerEnabledState(e,t)})}jQuery(document).ready(function(){var e=jQuery.find(".optional-container");jQuery.each(e,function(e,t){var n=jQuery(t),r=n.attr("controlling-checkbox"),i='input[name="'+r+'"]',s=jQuery(i).is(":checked");setContainerEnabledState(n,s);registerEnableStateCallback(n,i)});jQuery(".display-categories a.select-button").click(function(){var e=jQuery(this).hasClass("frank-select");jQuery(this).closest(".categories-container").find("input").each(function(){jQuery(this).attr("checked",e)});return!1});jQuery("#frank-add-content-section a").click(function(){var e=jQuery(".frank-content-sections:eq(0)").clone();jQuery(".frank-content-sections:last").after(e);jQuery(".frank-content-sections:last input[type=text]").val("");jQuery(".frank-content-sections:last textarea").val("");jQuery(".frank-content-sections:last input[type=checkbox]").attr("checked",!1);var t=new Date;t=t.getTime();jQuery(".frank-content-sections:last .display-types select").attr("name","frank-display-type-"+t).attr("id","frank-display-type-"+t);jQuery(".frank-content-sections:last .display-titles input").attr("name","frank-section-title-"+t).attr("id","frank-section-title-"+t);jQuery(".frank-content-sections:last .display-captions textarea").attr("name","frank-section-caption-"+t).attr("id","frank-section-caption-"+t);jQuery(".frank-content-sections:last .display-posts input").attr("name","frank-section-num-posts-"+t).attr("id","frank-section-num-posts-"+t);jQuery(".frank-content-sections:last .categorychecklist input").each(function(){var e=jQuery(this);e.attr("name","post_category-"+t+"[]");e.attr("id",e.attr("id")+"-"+t)});if(jQuery(".frank-content-sections").length>1){jQuery(".frank-handle").show();jQuery(".frank-handle:first").after('<p class="dragdrop">&larr; (Drag & Drop Content Sections to Re-Order)</p>');jQuery("#frank-content-sections").sortable("refresh")}else jQuery(".frank-handle").hide();return!1});jQuery("a.frank-content-section-delete").click(function(){if(confirm("Are you sure you want to delete this Content Section?")){var e;e=jQuery(this).parent().parent();e.slideUp(function(){e.remove();if(jQuery(".frank-content-sections").length>1){jQuery(".frank-handle").show();jQuery(".frank-handle:first").after('<p class="dragdrop">&larr; (Drag & Drop Content Sections to Re-Order)</p>');jQuery("#frank-content-sections").sortable("refresh")}else jQuery(".frank-handle").hide()})}return!1});jQuery(".frank-content-sections").each(function(){if(jQuery(this).attr("id")!="default"&&!jQuery(this).hasClass("frank-content-section-default")){frankhash=jQuery(this).attr("id").replace("frank-street-section-","");jQuery(this).find(".categorychecklist input").each(function(){frankcat=jQuery(this);frankcat.attr("name","post_category-"+frankhash+"[]");frankcat.attr("id",frankcat.attr("id")+"-"+frankhash)})}});if(jQuery(".frank-content-sections").length>1){jQuery(".frank-handle:first").after('<p class="dragdrop">&larr; (Drag & Drop Content Sections to Re-Order)</p>');jQuery(function(){jQuery("#settings-container").sortable({axis:"y",containment:"parent",forceHelperSize:!0,helper:"clone",opacity:.6});jQuery("#settings-container").disableSelection()})}else jQuery(".frank-handle").hide()});